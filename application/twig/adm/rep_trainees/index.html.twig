{% extends 'adm/layout.html.twig' %}
{% block add_css %}
{{ parent() }}
<style type="text/css">
	@media print {
		@page {
			size: a4 landscape;
		}
	}
	
	.wrap-header {}

	.wrap-footer {
		page-break-inside: avoid;
	}
</style>
{% endblock %}

{% block content %}

<div class="content-wrapper" id="vue-master">

	<section class="content-header">
		<div class="container-fluid">
			<div class="row mb-2">
				<div class="col-sm-6">
					<h4>{{ content_title }}</h4>
				</div>
				<div class="col-sm-6">
					<ol class="breadcrumb float-sm-right">
						<li class="breadcrumb-item">Beranda</li>
						<li class="breadcrumb-item">Laporan</li>
						<li class="breadcrumb-item"><a href="#">Peserta</a></li>
					</ol>
				</div>
			</div>
		</div>
	</section>

	<!-- Main content -->
	<section class="content">
		<div class="container-fluid">
			<div class="row">

				<div class="col-md-12">

					<div class="card card-default">
						<!-- <div class="card-header">
							<h3 class="card-title">Data</h3>
						</div> -->
						<div class="card-body">

							<div class="row">

								<div class="col-md-3">
									<div class="form-group">
										<label>Program</label>
										<select class="form-control select2 select-program" id="program" name="program" tabindex="1">
											<option value="">(Semua)</option>
											{% if program_data %}
											{% for program_row in program_data %}
											<option value="{{ program_row.program_header_id }}">{{ program_row.program_header_name }}</option>
											{% endfor %}
											{% endif %}
										</select>
									</div>
								</div>

								<div class="col-md-3">
									<div class="form-group">
										<label>Jenis</label>
										<select class="form-control select2 select-program-class" id="class" name="class" tabindex="2">
											<option value="">(Semua)</option>
											{% if class_data %}
											{% for class_row in class_data %}
											<option value="{{ class_row.program_class_id }}">{{ class_row.program_class_name }}</option>
											{% endfor %}
											{% endif %}
										</select>
									</div>
								</div>

								<div class="col-md-3">
									<div class="form-group">
										<label>Kategori</label>
										<select class="form-control select2 select-program-type" id="type" name="type" tabindex="3">
											<option value="">(Semua)</option>
											{% if type_data %}
											{% for type_row in type_data %}
											<option value="{{ type_row.program_type_id }}">{{ type_row.program_type_name }}</option>
											{% endfor %}
											{% endif %}
										</select>
									</div>
								</div>

								<div class="col-md-3">
									<div class="form-group">
										<label>Batch</label>
										<select class="form-control select2 select-batch" id="batch" name="batch" tabindex="4">
											<option value="">(Semua)</option>
											{% if batch_data %}
											{% for batch_row in batch_data %}
											<option value="{{ batch_row.batch_header_id }}">{{ batch_row.batch_header_name }}</option>
											{% endfor %}
											{% endif %}
										</select>
									</div>
								</div>

							</div>

							<div class="row">

								<div class="col-md-3">
									<div class="form-group">
										<label>Perusahaan</label>
										<select class="form-control select2 select-company" id="company" name="company" tabindex="5">
											<option value="">(Semua)</option>
											{% if company_data %}
											{% for company_row in company_data %}
											<option value="{{ company_row.company_id }}">{{ company_row.company_name }}</option>
											{% endfor %}
											{% endif %}
										</select>
									</div>
								</div>

								<div class="col-md-3">
									<div class="form-group">
										<label>Peserta</label>
										<select class="form-control select2 select-trainee" id="trainee" name="trainee" tabindex="6">
											<option value="">(Semua)</option>
											{% if trainee_data %}
											{% for trainee_row in trainee_data %}
											<option value="{{ trainee_row.trainee_id }}">{{ trainee_row.trainee_name }}</option>
											{% endfor %}
											{% endif %}
										</select>
									</div>
								</div>

								<div class="col-md-3">
									<div class="form-group">
										<label>No. Sertifikat</label>
										<input type="text" class="form-control text-certificate">
									</div>
								</div>

								<div class="col-md-3">
									<!-- <div class="form-group">
										<label>Status</label>
										<select class="form-control select2 select-status" id="status" name="status" tabindex="5"
											required="required">
											<option value="">(Semua)</option>
											<option value="1">Lulus</option>
											<option value="0">Belum Lulus</option>
										</select>
									</div> -->
								</div>

							</div>

							
						<!-- </div>
						<div class="card-footer"> -->
							<button class="btn btn-info float-right" style="width: 10%; margin-left: .5%;" @click="getData()">
								<i class="fas fa-sync-alt"></i> &nbsp; Proses
							</button>

							<div class="btn-group float-right" role="group" aria-label="Basic example" style="width: 30%;">
								<button class="btn btn-success float-right" style="width: 100%;" id="button-print">
									<i class="fas fa-print"></i> &nbsp; Print
								</button>
								<button class="btn btn-success float-right" style="width: 100%;" @click="exportExcel()">
									<i class="far fa-file-excel"></i> &nbsp; Export Excel
								</button>
							</div>
							
						</div>
					</div>

					<div class="card card-default">
						<!-- <div class="card-header">
							<h3 class="card-title">Data</h3>
						</div> -->
						<div class="card-body" id="master-content">

							

							<div class="wrap-header">
							<div class="form-horizontal col-md-12">
								<div class="form-group" style="margin-right:2px;">
									<img src="{{ base_url('assets/images/logo/loop-logo-blue-ic.png') }}"
										style="width: 10%; float:left; margin-right:1.5%;">
									<address>
										<strong style="font-family: Times New Roman, Times, serif; font-size:17px;">
											PT. LINKAR INDONESIA CENDEKIA
										</strong><br>
										<p style="font-family: Arial, Helvetica, sans-serif; font-size:11px; font-weight:600;">Gading
											Bukit Golf - Center Point Blok AA2 No.15</span><br>
											Cibubur 16963 - Indonesia<br>
											<abbr>Telp:</abbr> (021) 84311988/9, Email : info@loop-indonesia.com</p>
									</address>
									<hr>
								</div>
							</div>

							<h2 align="center" style="margin:5% 0 2.5% 0;">PESERTA</h2>

							<table style="font-size: 12px;" v-if="detailData.length != 0">
								<tr>
									<td>Peserta</td>
									<td style="width: 3%;">:</td>
									<td><% trainee %></td>
									<td style="width: 10%;">&nbsp;</td>

									<td>Perusahaan</td>
									<td style="width: 3%;">:</td>
									<td><% company %></td>
									<td style="width: 10%;">&nbsp;</td>

									<td>Batch</td>
									<td style="width: 3%;">:</td>
									<td><% batch %></td>
									<td style="width: 10%;">&nbsp;</td>
									
									<!-- <td style="width: 10%;">&nbsp;</td>
									<td>Status</td>
									<td style="width: 3%;">:</td>
									<td><% status %></td> -->
								</tr>
								<tr>
									<td>Program</td>
									<td style="width: 3%;">:</td>
									<td><% program %></td>
									<td style="width: 10%;">&nbsp;</td>

									<td>Jenis</td>
									<td style="width: 3%;">:</td>
									<td><% programclass %></td>
									<td style="width: 10%;">&nbsp;</td>

									<td>Katergori</td>
									<td style="width: 3%;">:</td>
									<td><% programtype %></td>
									<td style="width: 10%;">&nbsp;</td>
								</tr>
							</table>
							<br/>
							<table class="table" style="font-size: 12px; width:100%;">
								<thead>
									<tr>
										<th class="fit-width">
											No.
										</th>
										<th>
											NIP
										</th>
										<th>
											Nama
										</th>
										<th>
											Tempat, Tanggal Lahir
										</th>
										<th>
											Gender
										</th>
										<th>
											Telepon
										</th>
										<th>
											Email
										</th>
										<!-- <th>
											Alamat
										</th> -->
										<th>
											Perusahaan
										</th>
										<th>
											Program
										</th>
										<th>
											Batch
										</th>
										<th>
											No. Sertifikat
										</th>
									</tr>
								</thead>
								<tbody>
									<tr v-for="(row, detail_idx) in detailData">
										<td class="fit-width">
											<% row.no %>
										</td>
										<td>
											<% row.nip %>
										</td>
										<td>
											<% row.name %>
										</td>
										<td>
											<% row.pbod %>
										</td>
										<td>
											<% row.gender %>
										</td>
										<td>
											<% row.telp %>
										</td>
										<td>
											<% row.email %>
										</td>
										<!-- <td>
											<% row.address %>
										</td> -->
										<td>
											<% row.company %>
										</td>
										<td>
											<% row.program %>
										</td>
										<td>
											<% row.batch %>
										</td>
										<td>
											<% row.no_certi %>
										</td>
									</tr>
								</tbody>
								<tbody v-if="detailData.length == 0">
									<tr>
										<td colspan="7">
											Tidak ada data yang tersedia pada tabel ini
										</td>
									</tr>
								</tbody>
							</table>
							</div>
						</div>
					</div>

				</div>

			</div>
			<!-- /.row -->
		</div><!-- /.container-fluid -->
	</section>
	<!-- /.content -->

</div>

{% endblock  %}

{% block add_javascript %}
{{ parent() }}

<script type="text/javascript">
	$('[data-widget="pushmenu"]').PushMenu('toggle');

	jQuery(function($) {

    // Function available at https://gist.github.com/sixlive/55b9630cc105676f842c

    $.fn.printDiv = function() {
      var printContents = $(this).html();
      var originalContents = $('body').html();
      $('body').html(printContents);
      $('body').addClass('js-print');
      window.print();
      $('body').html(originalContents);
      $('body').removeClass('js-print');
    };

    // Print
    $('#button-print').click(function() {
      $('#master-content').printDiv();
      setTimeout(function(){
        window.close()
        location.reload();
      },10);
    });

  });
</script>

<script type="text/javascript" src="{{ assets_url('assets/js/app/rep_trainees/index.js?') }}"></script>
<script type="text/javascript">
	window.REPORT.init();
	window.REPORT.handleProgram();
	window.REPORT.handleClass();
	window.REPORT.handleType();
	window.REPORT.handleBatch();
	window.REPORT.handleCompany();
	window.INPUT.handleSelect2();
</script>
{% endblock  %}